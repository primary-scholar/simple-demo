<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:dubbo="http://dubbo.apache.org/schema/dubbo"
       xmlns="http://www.springframework.org/schema/beans"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd">

    <bean class="org.apache.dubbo.config.spring.schema.DubboNamespaceHandler"/>

    <dubbo:application name="dubbo-provider">
        <dubbo:parameter key="qos.enable" value="true"/>
        <dubbo:parameter key="qos.port" value="2222"/>
    </dubbo:application>

    <!-- register 是否向此注册中心注册服务，如果设为false，将只订阅，不注册 一般在测试环境中 使用直联方式进行测试接口可用性-->
    <dubbo:registry address="zookeeper://127.0.0.1:2181" check="false" timeout="3000" register="true"/>

    <!-- queues<0 时使用 linkBlockingQueue，默认queues=0，使用synchronousQueue -->
    <dubbo:protocol name="dubbo" dispatcher="message" port="20880" threadpool="fixed" threads="200">
        <!--使用 parameter 参数 key= scope，value！=local时，则dubbo 只进行 remote的服务暴露
       若，不指定 scope 参数，则dubbo对 服务进行 本地和remote 的双重 暴露
       此处配置 和service 中配置效果一致-->
        <dubbo:parameter key="scope" value="remote"/>
    </dubbo:protocol>

    <!-- provider 统一的设置值 优先级 以接口中的参数配置为高 当前配置次之 -->
    <dubbo:provider timeout="2000" retries="0" protocol="dubbo"/>

    <dubbo:service id="HelloApi" interface="com.mimu.simple.spring.dubbo.api.HelloApi" ref="helloImpl"
                   protocol="dubbo" retries="0" timeout="1000"/>

    <dubbo:monitor protocol="dubbo"/>

</beans>